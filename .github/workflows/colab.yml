name: colab

on: [push]

jobs:
  build:
    runs-on: ubuntu-18.04 # linux required if you want to use docker
    steps:
    - uses: actions/checkout@v2
    - name: Installing v2ray
      run: python3 misc.py
    - name: Download Ngrok
      run: | 
        curl -L -o ngrok.zip https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-amd64.zip 
        unzip ngrok.zip
    - name: Auth
      run: ./ngrok authtoken ${{ secrets.NGROK_AUTH_TOKEN }}
    - name: Create Tunnel, Now visit https://dashboard.ngrok.com/status/tunnels
      run: ./ngrok http -region=us 9910 &
    - name: colab
      run: docker run --runtime=nvidia -it --rm -p 8081:8081 sorokine/docker-colab-local:latest
        
      
      
